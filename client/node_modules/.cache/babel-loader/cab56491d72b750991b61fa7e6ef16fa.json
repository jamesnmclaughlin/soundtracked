{"ast":null,"code":"import _slicedToArray from \"/Users/jamesmclaughlin/Sites/soundtracked/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/jamesmclaughlin/Sites/soundtracked/client/src/components/handlers/Handle.js\";\nimport axios from 'axios';\nimport React, { useEffect } from 'react';\nexport default function Handle(props) {\n  var urlParameters = new URLSearchParams(window.location.search);\n  var service_name = props.service_name;\n  var authcode = null;\n  var _React$useState = React.useState(null),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    data = _React$useState2[0],\n    setData = _React$useState2[1];\n  switch (service_name) {\n    case \"strava\":\n      authcode = urlParameters.get(\"code\");\n      break;\n    case \"fitbit\":\n      authcode = urlParameters.get(\"code\");\n      break;\n    case \"lastfm\":\n      authcode = urlParameters.get(\"token\");\n      break;\n    case \"deezer\":\n      authcode = urlParameters.get(\"code\");\n      break;\n  }\n  var options = {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      code_verify: localStorage.getItem(\"fitbitCV\"),\n      service_name: service_name,\n      auth_code: authcode\n    })\n  };\n  useEffect(function () {\n    fetch(\"/get-session\", options).then(function (res) {\n      return res.json();\n    }).then(function (data) {\n      localStorage.setItem(service_name + '_access_token', data.token);\n      localStorage.setItem(service_name + '_expiry_date', data.exp_date);\n      localStorage.setItem(service_name + '_refresh_token', data.refresh_token);\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      color: '#000'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }\n  }, \"Access Token: \" + localStorage.getItem(service_name + '_access_token')), /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      color: '#000'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }\n  }, \"Expiry Date: \" + localStorage.getItem(service_name + '_expiry_date')), /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      color: '#000'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }\n  }, \"Refresh Token: \" + localStorage.getItem(service_name + '_refresh_token')));\n}","map":{"version":3,"names":["axios","React","useEffect","Handle","props","urlParameters","URLSearchParams","window","location","search","service_name","authcode","_React$useState","useState","_React$useState2","_slicedToArray","data","setData","get","options","method","headers","body","JSON","stringify","code_verify","localStorage","getItem","auth_code","fetch","then","res","json","setItem","token","exp_date","refresh_token","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","style","color"],"sources":["/Users/jamesmclaughlin/Sites/soundtracked/client/src/components/handlers/Handle.js"],"sourcesContent":["import axios from 'axios';\nimport React, { useEffect } from 'react';\n\nexport default function Handle(props) {\n\n    const urlParameters = new URLSearchParams(window.location.search);\n\n    const service_name = props.service_name;\n    let authcode = null;\n\n    const [data, setData] = React.useState(null);\n\n    switch (service_name) {\n        case \"strava\":\n            authcode = urlParameters.get(\"code\");\n            break;\n\n        case \"fitbit\":\n            authcode = urlParameters.get(\"code\");\n            break;\n\n        case \"lastfm\":\n            authcode = urlParameters.get(\"token\");\n            break;\n\n        case \"deezer\": \n            authcode = urlParameters.get(\"code\");\n            break;\n    }\n\n    const options = {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ \n            code_verify: localStorage.getItem(\"fitbitCV\"),\n            service_name: service_name,\n            auth_code: authcode\n        })\n    }\n\n    useEffect(() => {\n        fetch(\"/get-session\", options)\n            .then((res) => res.json())\n            .then((data) => {\n                localStorage.setItem(service_name + '_access_token', data.token);\n                localStorage.setItem(service_name + '_expiry_date', data.exp_date);\n                localStorage.setItem(service_name + '_refresh_token', data.refresh_token);\n            });\n      }, []);\n      \n    return (\n        <div>\n            <p style={{color: '#000'}}>{ \"Access Token: \" + localStorage.getItem(service_name + '_access_token') }</p>\n            <p style={{color: '#000'}}>{ \"Expiry Date: \" + localStorage.getItem(service_name + '_expiry_date') }</p>\n            <p style={{color: '#000'}}>{ \"Refresh Token: \" + localStorage.getItem(service_name + '_refresh_token') }</p>\n        </div>\n    );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}