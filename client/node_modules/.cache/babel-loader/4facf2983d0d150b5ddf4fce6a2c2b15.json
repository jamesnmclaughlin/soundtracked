{"ast":null,"code":"var _jsxFileName = \"/Users/jamesmclaughlin/Sites/soundtracked/client/src/components/service.js\";\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nvar _process$env = process.env,\n  REACT_APP_STRAVA_CLIENT_ID = _process$env.REACT_APP_STRAVA_CLIENT_ID,\n  REACT_APP_LASTFM_API_KEY = _process$env.REACT_APP_LASTFM_API_KEY,\n  REACT_APP_FITBIT_CLIENT_ID = _process$env.REACT_APP_FITBIT_CLIENT_ID;\nexport default function Service(props) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"service\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 12,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"service-img \" + props.api,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"service-type \" + props.type,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 14,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"a\", {\n    className: \"service-connect\",\n    href: connectURL(props.api),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 15,\n      columnNumber: 13\n    }\n  }, \"Connect\"));\n}\nfunction connectURL(apiService) {\n  var url = \"\";\n  var response_type = \"code\";\n  var scope = \"\";\n  var approval_prompt = \"force\";\n  var redirectURL = \"http://localhost:3000/\" + apiService;\n  var code_challenge = \"\";\n  switch (apiService) {\n    case \"strava\":\n      scope = \"read,activity:read\";\n      url = \"https://www.strava.com/oauth/authorize?\";\n      url = url + \"client_id=\" + REACT_APP_STRAVA_CLIENT_ID + \"&response_type=\" + response_type + \"&redirect_uri=\" + redirectURL + \"&approval_prompt=\" + approval_prompt + \"&scope=\" + scope;\n      break;\n    case \"fitbit\":\n      code_challenge = \"test\";\n      scope = \"activity,heartrate\";\n      url = \"https://www.fitbit.com/oauth2/authorize?\";\n      url = url + \"client_id=\" + REACT_APP_FITBIT_CLIENT_ID + \"&code_challenge=\" + code_challenge + \"&code_challege_method=S256&response_type=\" + response_type;\n      break;\n    case \"lastfm\":\n      url = \"http://www.last.fm/api/auth?\";\n      url = url + \"api_key=\" + REACT_APP_LASTFM_API_KEY + \"&cb=\" + redirectURL;\n      break;\n    case \"deezer\":\n      url = \"https://connect.deezer.com/oauth/auth.php?\";\n      break;\n  }\n  return url;\n}\nfunction generateCodeVerifier() {\n  // Clearing previous code verifier\n  localStorage.remove('fitbitCV');\n  return;\n}","map":{"version":3,"names":["React","Link","_process$env","process","env","REACT_APP_STRAVA_CLIENT_ID","REACT_APP_LASTFM_API_KEY","REACT_APP_FITBIT_CLIENT_ID","Service","props","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","api","type","href","connectURL","apiService","url","response_type","scope","approval_prompt","redirectURL","code_challenge","generateCodeVerifier","localStorage","remove"],"sources":["/Users/jamesmclaughlin/Sites/soundtracked/client/src/components/service.js"],"sourcesContent":["import React from 'react';\nimport { Link } from 'react-router-dom';\n\nconst { \n    REACT_APP_STRAVA_CLIENT_ID,\n    REACT_APP_LASTFM_API_KEY,\n    REACT_APP_FITBIT_CLIENT_ID\n} = process.env;\n\nexport default function Service(props) {\n    return (\n        <div className=\"service\">\n            <div className={\"service-img \" + props.api}></div>\n            <div className={\"service-type \" + props.type}></div>\n            <a className=\"service-connect\" href={connectURL(props.api)}>Connect</a>\n        </div>\n    );\n}\n\nfunction connectURL(apiService) {\n    let url = \"\";\n    let response_type = \"code\";\n    let scope = \"\";\n    let approval_prompt = \"force\";\n    let redirectURL = \"http://localhost:3000/\" + apiService;\n    let code_challenge = \"\"\n\n    switch(apiService) {\n        case \"strava\":\n            scope = \"read,activity:read\";\n            url = \"https://www.strava.com/oauth/authorize?\";\n            url = url + \"client_id=\" + REACT_APP_STRAVA_CLIENT_ID + \"&response_type=\" + response_type + \"&redirect_uri=\" + redirectURL + \"&approval_prompt=\" + approval_prompt + \"&scope=\" + scope;\n            break;\n        case \"fitbit\": \n            \n            code_challenge = \"test\"\n\n            scope = \"activity,heartrate\";\n            url = \"https://www.fitbit.com/oauth2/authorize?\";\n            url = url + \"client_id=\" + REACT_APP_FITBIT_CLIENT_ID + \"&code_challenge=\" + code_challenge + \"&code_challege_method=S256&response_type=\" + response_type;\n            break;\n        case \"lastfm\":\n            url = \"http://www.last.fm/api/auth?\";\n            url = url + \"api_key=\" + REACT_APP_LASTFM_API_KEY + \"&cb=\" + redirectURL;\n            break;\n        case \"deezer\": \n\n            url = \"https://connect.deezer.com/oauth/auth.php?\";\n            break;\n    }\n\n    return url;\n}\n\nfunction generateCodeVerifier() {\n    // Clearing previous code verifier\n    localStorage.remove('fitbitCV')\n    \n    return \n}"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,IAAI,QAAQ,kBAAkB;AAAC,IAAAC,YAAA,GAMpCC,OAAO,CAACC,GAAG;EAHXC,0BAA0B,GAAAH,YAAA,CAA1BG,0BAA0B;EAC1BC,wBAAwB,GAAAJ,YAAA,CAAxBI,wBAAwB;EACxBC,0BAA0B,GAAAL,YAAA,CAA1BK,0BAA0B;AAG9B,eAAe,SAASC,OAAOA,CAACC,KAAK,EAAE;EACnC,oBACIT,KAAA,CAAAU,aAAA;IAAKC,SAAS,EAAC,SAAS;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACpBjB,KAAA,CAAAU,aAAA;IAAKC,SAAS,EAAE,cAAc,GAAGF,KAAK,CAACS,GAAI;IAAAN,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,EAAO,eAClDjB,KAAA,CAAAU,aAAA;IAAKC,SAAS,EAAE,eAAe,GAAGF,KAAK,CAACU,IAAK;IAAAP,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,EAAO,eACpDjB,KAAA,CAAAU,aAAA;IAAGC,SAAS,EAAC,iBAAiB;IAACS,IAAI,EAAEC,UAAU,CAACZ,KAAK,CAACS,GAAG,CAAE;IAAAN,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAC,SAAO,CAAI,CACrE;AAEd;AAEA,SAASI,UAAUA,CAACC,UAAU,EAAE;EAC5B,IAAIC,GAAG,GAAG,EAAE;EACZ,IAAIC,aAAa,GAAG,MAAM;EAC1B,IAAIC,KAAK,GAAG,EAAE;EACd,IAAIC,eAAe,GAAG,OAAO;EAC7B,IAAIC,WAAW,GAAG,wBAAwB,GAAGL,UAAU;EACvD,IAAIM,cAAc,GAAG,EAAE;EAEvB,QAAON,UAAU;IACb,KAAK,QAAQ;MACTG,KAAK,GAAG,oBAAoB;MAC5BF,GAAG,GAAG,yCAAyC;MAC/CA,GAAG,GAAGA,GAAG,GAAG,YAAY,GAAGlB,0BAA0B,GAAG,iBAAiB,GAAGmB,aAAa,GAAG,gBAAgB,GAAGG,WAAW,GAAG,mBAAmB,GAAGD,eAAe,GAAG,SAAS,GAAGD,KAAK;MACtL;IACJ,KAAK,QAAQ;MAETG,cAAc,GAAG,MAAM;MAEvBH,KAAK,GAAG,oBAAoB;MAC5BF,GAAG,GAAG,0CAA0C;MAChDA,GAAG,GAAGA,GAAG,GAAG,YAAY,GAAGhB,0BAA0B,GAAG,kBAAkB,GAAGqB,cAAc,GAAG,2CAA2C,GAAGJ,aAAa;MACzJ;IACJ,KAAK,QAAQ;MACTD,GAAG,GAAG,8BAA8B;MACpCA,GAAG,GAAGA,GAAG,GAAG,UAAU,GAAGjB,wBAAwB,GAAG,MAAM,GAAGqB,WAAW;MACxE;IACJ,KAAK,QAAQ;MAETJ,GAAG,GAAG,4CAA4C;MAClD;EAAM;EAGd,OAAOA,GAAG;AACd;AAEA,SAASM,oBAAoBA,CAAA,EAAG;EAC5B;EACAC,YAAY,CAACC,MAAM,CAAC,UAAU,CAAC;EAE/B;AACJ"},"metadata":{},"sourceType":"module"}